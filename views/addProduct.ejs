<%- include('partials/header', {
  title: 'Add Product - Supermarket App',
  user,
  navLinks: [
    { href: '/orders', label: 'Orders' },
    { href: '/users', label: 'Users' },
    { href: '/inventory', label: 'Inventory' },
    { href: '/addProduct', label: 'Add Product' },
    { href: '/logout', label: 'Logout' }
  ]
}) %>

<style>
  .page-shell { max-width: 720px; margin: 32px auto 48px; padding: 0 16px; }
  .panel { background: #ffffff; border: 1px solid #e5e7eb; border-radius: 16px; box-shadow: 0 12px 32px rgba(16,24,40,0.08); padding: 24px; }
  .helper-text { color: #6b7280; }
</style>

<div class="page-shell">
  <div class="panel">
    <h2 class="mb-1">Add New Product</h2>
    <p class="helper-text mb-4">Complete the details below to publish a new item.</p>
    <form action="/addProduct" method="POST" enctype="multipart/form-data">

      <div class="mb-3">
        <label for="name" class="form-label">Product Name</label>
        <input type="text" class="form-control" id="name" name="name" required>
      </div>

      <div class="mb-3">
        <label for="category" class="form-label">Category</label>
        <select id="category" name="category" class="form-select" onchange="toggleCustomCategory(this.value)" required>
          <option value="">Select a category</option>
          <option value="Produce (Fruits & Vegetables)">Produce (Fruits & Vegetables)</option>
          <option value="Meat & Seafood">Meat & Seafood</option>
          <option value="Dairy & Eggs">Dairy & Eggs</option>
          <option value="Bakery">Bakery</option>
          <option value="Pantry (Dry Goods, Canned, Condiments, Pasta/Rice)">Pantry (Dry Goods, Canned, Condiments, Pasta/Rice)</option>
          <option value="Beverages (Water, Juice, Soda, Tea/Coffee)">Beverages (Water, Juice, Soda, Tea/Coffee)</option>
          <option value="Frozen Foods">Frozen Foods</option>
          <option value="Snacks & Confectionery">Snacks & Confectionery</option>
          <option value="Household & Cleaning">Household & Cleaning</option>
          <option value="Health & Beauty / Personal Care">Health & Beauty / Personal Care</option>
          <option value="Pet Supplies">Pet Supplies</option>
          <option value="International / Ethnic Foods">International / Ethnic Foods</option>
          <option value="Other">Other (type below)</option>
        </select>
        <input type="text" id="customCategory" name="customCategory" class="form-control mt-2" placeholder="Enter category" style="display: none;">
      </div>

      <div class="mb-3">
        <label for="quantity" class="form-label">Quantity</label>
        <input type="number" class="form-control" id="quantity" name="quantity" min="0" step="1" required>
      </div>

      <div class="mb-3">
        <label for="price" class="form-label">Price ($)</label>
        <input type="number" class="form-control" id="price" name="price" min="0" step="0.01" required>
      </div>

      <div class="mb-4">
        <label for="image" class="form-label">Product Image</label>
        <input class="form-control" type="file" id="image" name="image" accept="image/*">
      </div>

      <div class="d-grid">
        <button type="submit" class="btn btn-primary">Add Product</button>
      </div>

    </form>
  </div>
</div>

<script>
  function toggleCustomCategory(value) {
    const custom = document.getElementById('customCategory');
    custom.style.display = value === 'Other' ? 'block' : 'none';
    if (value !== 'Other') custom.value = '';
  }
</script>

<%- include('partials/footer') %>
