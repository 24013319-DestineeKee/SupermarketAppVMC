<%- include('partials/header', {
  title: 'Inventory - Supermarket App',
  user,
  navLinks: [
    { href: '/orders', label: 'Orders' },
    { href: '/users', label: 'Users' },
    { href: '/inventory', label: 'Inventory' },
    { href: '/addProduct', label: 'Add Product' },
    { href: '/profile', label: 'Profile' },
    { href: '/logout', label: 'Logout' }
  ]
}) %>

<style>
  .page-shell { max-width: 1200px; margin: 32px auto 48px; padding: 0 16px; }
  .section-heading { display: flex; justify-content: space-between; align-items: center; gap: 12px; flex-wrap: wrap; margin-bottom: 12px; }
  .section-heading .helper-text { margin: 0; color: #6b7280; }
  .table-card { overflow: hidden; border-radius: 16px; border: 1px solid #e5e7eb; box-shadow: 0 10px 26px rgba(16,24,40,0.06); }
  .table-card thead { background: #f8fafc; font-weight: 600; }
  .table-card tbody tr:hover { background: #f1f5f9; }
  .badge-soft { background: #eef2ff; color: #0d6efd; border-radius: 999px; padding: 6px 10px; font-weight: 600; }
</style>

<div class="page-shell">
  <div class="section-heading">
    <div>
      <h2 class="mb-0">Inventory</h2>
      <p class="helper-text mb-0">Manage stock, prices, and visibility.</p>
    </div>
    <div class="helper-text">Signed in as <%= user.displayName || user.username || user.email %> (<%= user.role %>)</div>
  </div>

  <div class="d-flex flex-wrap gap-2 mb-3">
    <a class="btn btn-primary" href="/addProduct">Add Product</a>
    <a class="btn btn-outline-secondary" href="/orders">Orders</a>
    <a class="btn btn-outline-secondary" href="/users">Users</a>
  </div>

  <div class="table-card">
    <table class="table table-hover align-middle text-center mb-0">
      <thead>
        <tr>
          <th width="200">Product</th>
          <th width="120">Image</th>
          <th width="90">Quantity</th>
          <th width="90">Price</th>
          <th width="90">Edit</th>
          <th width="90">Delete</th>
        </tr>
      </thead>
      <tbody>
        <% for(let i=0; i < products.length; i++) { %>
          <tr>
            <td class="text-start">
              <div class="fw-semibold"><a href="/product/<%= products[i].id %>"><%= products[i].productName %></a></div>
              <div class="small text-muted"><%= products[i].category || 'Uncategorized' %></div>
            </td>
            <td>
              <% if (products[i].image) { %>
                <img src="/images/<%= products[i].image %>" class="product-thumb" alt="<%= products[i].productName %>">
              <% } else { %>
                <span class="text-muted">No image</span>
              <% } %>
            </td>
            <td><span class="badge-soft"><%= products[i].quantity %></span></td>
            <td>$<%= products[i].price.toFixed(2) %></td>
            <td><a class="btn btn-sm btn-outline-primary" href="/updateProduct/<%= products[i].id %>">Edit</a></td>
            <td><a class="btn btn-sm btn-outline-danger" href="/deleteProduct/<%= products[i].id %>" onclick="return confirm('Are you sure you want to delete this product?')">Delete</a></td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>

<%- include('partials/footer') %>
